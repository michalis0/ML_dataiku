# Day 1 Data Cleaning and Visualization

image

## Table of contents 
* [Step 1 Launch DataIku](#step-1-launch-dataiku)
* [Step 2 Import the dataset](#step-2-import-the-dataset)
* [Step 3 Data Cleaning](#step-3-data-cleaning)
* [Step 4 Data Visualization](#step-4-data-visualization)
* [Step 5 Export the dataset](#step-5-export-the-dataset)
* [Step 6 Preparing for tomorrow](#step-6-preparing-for-tomorrow)



-----------------------------------
### **Step 5: Export the dataset:**
-----------------------------------
-----------------------------------
### **Step 6: Preparing for tomorrow:**
-----------------------------------

-----------------------------------
### **Step 1: Launch Dataiku:**
-----------------------------------

Please follow this link: https://www.dataiku.com/ and create an account.

Once the account is created, please create a new project, this is done by:
- Clicking on the "New Project" button - "Blank Project"
- Entering the name "Regression: Customer Analytics Dataset" 
- Click on "CREATE"

You just created your first project ! It should look like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_1_init.png).

-----------------------------------
### **Step 2: Import a dataset:**
-----------------------------------

Within the newly created project, you can import the dataset by following these steps:
- a. Download the dataset we will be using. You can find the dataset of this first day under this [link](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Dataset/NotCleaned/1_customer_analytics_dataset.csv) and click on the download button "Download raw file".
- b. Click on the "IMPORT YOUR FIRST DATASET" - "upload your files" and drag the dataset you just downloaded. Once the dataset is imported click on "CREATE". You just imported your dataset! 
- c. Have a look at the dataset and the different features, we have:
    - **customer_id:** ID of the customer in the dataset
    - **ip:** IP address associated with the customer's interactions or activities
    - **ip_country:** Country associated with the customer's IP address
    - **page_visited:** Pages or website sections visited by the customer
    - **campaign:** Campaign or marketing initiative associated with the customer's interaction
    - **revenue:** Revenue generated or attributed to the customer.

- d. This dataset captures customer interactions and activities, including their unique ID, IP address and country, visited pages, associated campaigns, and the revenue generated. It provides insights into customer behavior, marketing effectiveness, and revenue generation. Using this dataset, we will try to **predict the revenue generated by customers** based on the provided dataset. Before creating the machine learning model, we need to clean the model. 

**Check**: You dataset should have 1,483 rows and 6 columns. 

-----------------------------------
### **Step 3: Data Cleaning:**
-----------------------------------

You may ask yourselves why we need to clean this dataset, as it may seem complete. We clean data for several reasons:
- **Accuray:** Cleaning data ensures that it is accurate, free from errors, and inconsistencies, enabling reliable analysis.
- **Consistency:** data cleaning helps ensure consistency by standardizing formats, resolving discrepancies, and handling missing values
- **Quality:** clean data improves the overall quality of analysis and models, minimizing biases, outliers, and irrelevant information. 

Now let's clean the data ! We will perform the steps below in order to have a perfectly cleaned dataset, which we could use to build our machine learning models, to make predictions ! 

- **Step 1:** Handling Missing Values
- **Step 2:** Handling Outliers
- **Step 3:** Renaming columns 
- **Step 4:** Removing Duplicates 


You should currently see the table containing the dataset (it should look like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_3_init.png)). Now click on the tab menu "Regression: Customer Analytics Dataset", this will show your project, you can now click on "GO TO FLOW". 

The "flow" allows you to create and manage data pipelines, workflows, and transformations for data preparation, analysis, and machine learning tasks. 

You can now select the tab "RECIPE" and select "Visual" and click on "Data preparation". Now on the popup, select the "1_customer_analytics_dataset" and click on "CREATE RECIPE". This creates a space where you can perform data cleaning techniques. (it should look like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_3_cleaning.png)) Lets start cleaning ! 



#### **Step 3.1: Handling Missing Values:**
-----------------------------------
- **What:** Identify and handle missing values in your dataset. 

- **How:**
    - You should see some cells that do not have data, in order to identify them, please click on a cell that has no data and select "Fill empty rows with..." and add a "constant value" NA, then click "OK". Please do the same for the columns "ip" and "ip_country".
    - To delete missing values (NA - represented in red / blue) click on the cell and select "Remove Rows equal to NA". Please do this for "ip" and "ip_country".

- **Expected:** How many rows are in your dataset now (Expected: -6 ==> 1'477 rows left) 



#### **Step 3.2: Handling Outliers:**
-----------------------------------
- **What:** Identify and remove any outliers records from your dataset. 

- **How:**
    - Click on "pages_visited" and click on "Analyze", this opens a popup which shows potential outliers. 
    - Click on "ACTIONS" and "remove rows outside of 1.5 IQR"
    - Please do the same for the "revenue"

- **Expected:** How many rows are in your dataset (Expected: -71 and -30 => 1'377 rows left) 


#### **Step 3.3: Renaming columns:**
-----------------------------------
- **What:** Rename columns for clarity

- **How:**
    -  Click on "revenue" and click "Rename", and insert "target_revenue". This columns is the target column, which corresponds to the value we would like to predict with our model. It is a good approach to give it the name of the target variable, in order to add some clarity in the dataset. 


Once this is done, click on "RUN", this will clean the table by executing the operations that we have created. Then go back to the "flow board", by clicking on "Regression: Customer Analytics Dataset". (It should look like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_3_4_clean.png))



#### **Step 3.4: Removing duplicates:**
---------------------------------------
- **What:** Identify and remove any duplicate records from your dataset. Duplicates can skew your analysis and introduce bias.

- **How:**
    - There are duplicate customer ids in the dataset that we need to remove
    - Now please select "RECIPE" and select "visual" and click on "group". In the popup select the "1_customer_analytics_dataset_prepared" and group by "ip". Now rename the output dataset as "1_regression_cleaned_dataset". 
    - Now add all the keys "Select key to add" except the "customer_id" column. Then click on "RUN" 
    - Go back to the "flow" screen and click on the last dataset "1_regression_cleaned_dataset"
- **Expected:** How many rows are in your dataset (Expected: 1'376)

(Your data flow should look something like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_3_4_clean.png))



-----------------------------------
### **Step 4: Data Visualization:**
-----------------------------------

We will now focus on Data Visualization, which is used to visually represent data patterns, relationships, and insights in a more accessible and intuitive way, aiding understanding and decision-making. To do so we will perform 4 different visualizations:

- Plot 1: Plot Number of page visited and revenue (scatter plot)
- Plot 2: Plot Revenue generated by campaign (bar plot)
- Plot 3: Plot revenue generate by country IP (pie chart)
- Plot 4: Plot revenue distribution across campaigns (box plot)

---
#### **Step 4.1:** Plot Income Distribution by Education Level

- **What:** Visualize a scatter plot to explore the relationship between age and revenue.
- **How:**
    - Click on "1_regression_cleaned_dataset" then click on the tab "Charts" - this is how we are going to create our plots. I will walk you through the first plot - Plot Customer age and revenue, where we will plot number of page visited on the x-axis and target_revenue on the y-axis
    - Select "Scatter plot" and drag and drop page_visited and target_revenue 
    - Click on "PUBLISH" then "CREATE", this creates a Dashboard (which is also accessible from the project root)

    
Do the same for the other plots ! (you can try scatter plots, pie charts, feel free to test different graphs) (Your dashboard should look something like [this](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Help/step_3_4_clean.png))


### **Step 5: Export the dataset:**
-----------------------------------
To export the dataset, go back to the "flow" and click on "1_regression_cleaned_dataset" then open the panel and click on "Export". The cleaned dataset can be found [here](https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Dataset/Cleaned/1_regression_cleaned_dataset.csv)


### Preparation for tomorrow: 

###Â Classification : 

In order to perform our classification task we also need to clean the dataset that we will be using. The dataset that we have chosen is "Airbnb Cleaned Europe Dataset", link to the dataset can be found here: https://www.kaggle.com/datasets/dipeshkhemani/airbnb-cleaned-europe-dataset. Here we are trying to predict the Room type, either private or entire home / apartment. The data cleaning has been done for you and you can find the cleaned dataset under this link: https://github.com/michalis0/ML_dataiku/blob/main/Day%201/Dataset/Cleaned/airbnb_dataset_prepared.csv
In order to cleaned the dataset, we simply deleted specific columns which we did not need for our analysis. 

**TASK:** Please import the dataset in a new project called "Classification" and create a few graph to understand the data. 



